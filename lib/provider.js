var Le=Object.create,T=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Ve=Object.getOwnPropertyNames;var Oe=Object.getPrototypeOf,Ne=Object.prototype.hasOwnProperty;var R=n=>T(n,"__esModule",{value:!0});var E=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),qe=(n,t)=>{for(var e in t)T(n,e,{get:t[e],enumerable:!0})},He=(n,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ve(t))!Ne.call(n,r)&&r!=="default"&&T(n,r,{get:()=>t[r],enumerable:!(e=Fe(t,r))||e.enumerable});return n},F=n=>He(R(T(n!=null?Le(Oe(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var te=E(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});var st=require("os"),it=require("child_process"),ot=require("fs"),lt=require("path");function V(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var O=V(st),A=V(ot),D=V(lt),ct=(n,t=1,e)=>{if(e={indent:" ",includeEmptyLines:!1,...e},typeof n!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof n}\``);if(typeof t!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if(typeof e.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof e.indent}\``);if(t===0)return n;let r=e.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return n.replace(r,e.indent.repeat(t))},W=/\s+at.*(?:\(|\s)(.*)\)?/,ut=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,dt=typeof O.default.homedir=="undefined"?"":O.default.homedir(),ft=(n,t)=>(t=Object.assign({pretty:!1},t),n.replace(/\\/g,"/").split(`
`).filter(e=>{let r=e.match(W);if(r===null||!r[1])return!0;let a=r[1];return a.includes(".app/Contents/Resources/electron.asar")||a.includes(".app/Contents/Resources/default_app.asar")?!1:!ut.test(a)}).filter(e=>e.trim()!=="").map(e=>t.pretty?e.replace(W,(r,a)=>r.replace(a,a.replace(dt,"~"))):e).join(`
`)),pt=n=>n.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),U=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);t=[...t].map(r=>r instanceof Error?r:r!==null&&typeof r=="object"?Object.assign(new Error(r.message),r):new Error(r));let e=t.map(r=>typeof r.stack=="string"?pt(ft(r.stack)):String(r)).join(`
`);e=`
`+ct(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(let t of this._errors)yield t}},mt=U,gt=async(n,t,{concurrency:e=Infinity,stopOnError:r=!0}={})=>new Promise((a,s)=>{if(typeof t!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(e)||e===Infinity)&&e>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${e}\` (${typeof e})`);let o=[],l=[],u=n[Symbol.iterator](),i=!1,c=!1,d=0,f=0,p=()=>{if(i)return;let m=u.next(),g=f;if(f++,m.done){c=!0,d===0&&(!r&&l.length!==0?s(new mt(l)):a(o));return}d++,(async()=>{try{let y=await m.value;o[g]=await t(y,g),d--,p()}catch(y){r?(i=!0,s(y)):(l.push(y),d--,p())}})()};for(let m=0;m<e&&(p(),!c);m++);}),J=(n,t,e)=>new Promise((r,a)=>{if(e=Object.assign({concurrency:Infinity},e),typeof t!="function")throw new TypeError("Mapper function is required");let{concurrency:s}=e;if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);let o=[],l=n[Symbol.iterator](),u=!1,i=!1,c=0,d=0,f=()=>{if(u)return;let p=l.next(),m=d;if(d++,p.done){i=!0,c===0&&r(o);return}c++,Promise.resolve(p.value).then(g=>t(g,m)).then(g=>{o[m]=g,c--,f()},g=>{u=!0,a(g)})};for(let p=0;p<s&&(f(),!i);p++);}),X=J,ht=J;X.default=ht;var Y=async(n,t,e)=>(await X(n,(a,s)=>Promise.all([t(a,s),a]),e)).filter(a=>Boolean(a[0])).map(a=>a[1]),K=Y,yt=Y;K.default=yt;var b=typeof atom!="undefined",vt=typeof atom!="undefined"&&(atom.inDevMode()||atom.inSpecMode()),N="atom-package-deps.ignored";var wt=/["'&<>]/,z=Et;function Et(n){var t=""+n,e=wt.exec(t);if(!e)return t;var r,a="",s=0,o=0;for(s=e.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}o!==s&&(a+=t.substring(o,s)),o=s+1,a+=r}return o!==s?a+t.substring(o,s):a}async function bt(n,t,e){let r=it.spawn(n,t,e),a=new Promise((s,o)=>{let l={stdout:r.stdout?[]:null,stderr:r.stderr?[]:null};r.on("error",o),r.stdout&&r.stdout.on("data",function(u){l.stdout.push(u),e.handleStdout&&e.handleStdout(u)}),r.stderr&&r.stderr.on("data",function(u){l.stderr.push(u),e.handleStderr&&e.handleStderr(u)}),r.on("close",u=>{let i=null;l.stdout!=null&&(i=e.encoding===null||e.encoding==="buffer"?Buffer.concat(l.stdout):l.stdout.join(""));let c=null;l.stderr!=null&&(c=e.encoding===null||e.encoding==="buffer"?Buffer.concat(l.stderr):l.stderr.join("")),s({exitCode:u,stdout:i,stderr:c})})});return e.handleChildProcess(r),a}function _t(n,t,e){let r,a=bt(n,t,{...e,handleChildProcess(s){r=s}});return a.kill=function(s){return r.kill(s)},a}var kt=function(t,e){for(var r=t.split("."),a=e.split("."),s=0;s<3;s++){var o=Number(r[s]),l=Number(a[s]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0};async function xt(n){let t=atom.packages.getLoadedPackage(n),e=t&&t.metadata["package-deps"];return Array.isArray(e)?e:[]}async function It(n){return atom.packages.resolvePackagePath(n)}async function St(n){var t;let e=atom.packages.getLoadedPackage(n.name);return e==null?null:(t=e.metadata.version)!==null&&t!==void 0?t:null}async function At(n){let t=null;try{t=await A.default.promises.stat(n)}catch(a){}if(t==null||!t.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let e=null;try{let a=await A.default.promises.readFile(D.default.join(n,"package.json"),"utf8");e=JSON.parse(a)}catch(a){}let r=e==null||typeof e!="object"?[]:e["package-deps"];return Array.isArray(r)?r:[]}async function Pt(n){var t;let e=D.default.join((t=process.env.ATOM_HOME)!==null&&t!==void 0?t:D.default.join(O.default.homedir(),".atom"),"packages",n);try{return await A.default.promises.access(e,A.default.constants.R_OK),e}catch(r){return null}}async function Ct(n){var t,e;let{directory:r}=n;if(r==null)return null;let a=null;try{a=JSON.parse(await A.default.promises.readFile(D.default.join(r,"package.json"),"utf8"))}catch(s){return null}return(t=(e=a)===null||e===void 0?void 0:e.version)!==null&&t!==void 0?t:null}async function Tt(n){if(b){let t=await St(n);if(t)return t}return Ct(n)}var Q=b?It:Pt;function k(n,t){if(!n)throw new Error(t??"Invariant violation")}async function Dt(n){let t=await(b?xt(n):At(n));return vt&&(k(Array.isArray(t),`Dependencies for ${n} are not a valid array`),t.forEach((e,r)=>{if(Array.isArray(e))e.forEach((a,s)=>{let o=`Dependency#${r}#${s} for ${n} is invalid`;k(typeof a.name=="string"&&a.name.length>0,o),k(a.minimumVersion==null||typeof a.minimumVersion=="string"&&a.minimumVersion.length>0,o)}),k(e.length>0,`Dependency#${r} for ${n} has no group items`);else{let a=`Dependency#${r} for ${n} is invalid`;k(typeof e.name=="string"&&e.name.length>0,a),k(e.minimumVersion==null||typeof e.minimumVersion=="string"&&e.minimumVersion.length>0,a)}})),t}async function Z(n){if(n.directory==null)return!0;if(n.minimumVersion==null)return!1;let t=await Tt(n);return t==null?!0:kt(n.minimumVersion,t)===1}function $t(n){var t;return b?((t=atom.config.get(N))!==null&&t!==void 0?t:[]).includes(n)?!0:atom.packages.isPackageDisabled("notifications")?(console.warn(`Enable notifications to install dependencies for ${n}`),!0):!1:!1}function jt(n){var t;if(!b)return;let e=new Set((t=atom.config.get(N))!==null&&t!==void 0?t:[]);e.add(n),atom.config.set(N,Array.from(e))}var Mt=new Set(["\u2713","done"]),Lt=/(?:Installing|Moving) (.*?) to .* (.*)/;async function Ft(n){let t=b?atom.packages.getApmPath():"apm",{stdout:e,stderr:r}=await _t(t,["install",n.name,"--production","--color","false"]),a=Lt.exec(e.trim());if(a!=null&&Mt.has(a[2]))return;let s=new Error(`Error installing dependency: ${n.name}`);throw s.stack=r.trim(),s}var ee=!0;function Vt({packageName:n,dependencies:t}){return new Promise(e=>{let r=t.filter(c=>!Array.isArray(c)),a=t.filter(c=>Array.isArray(c)),s=a.length===0,o=s?r.map(c=>c.name).join(", "):"Something went wrong. Check your developer console",l=a.map(c=>c[0]),u=atom.notifications.addInfo(`${n} needs to install dependencies`,{dismissable:!0,icon:"cloud-download",detail:o,description:`Install dependenc${t.length===1?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{e(s?[]:r.concat(l)),u.dismiss()}},{text:"No Thanks",onDidClick:()=>{u.dismiss()}},{text:"Never",onDidClick:()=>{jt(n),ee&&(ee=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),u.dismiss()}}]});if(u.onDidDismiss(()=>e([])),!s)try{var i;let c=atom.views.getView(u),d=(i=c==null?void 0:c.element)!==null&&i!==void 0?i:null;if(d==null)throw new Error("Unable to get notification element from view");let f=d.querySelector(".detail-content");if(f==null)throw new Error("Content detail container not found inside the notification");if(f.innerHTML="",r.length>0){let g=document.createElement("div");g.innerHTML=`Packages without choices: <br /><ul><li>${r.map(y=>z(y.name)).join("</li><li>")}</li></ul>`,f.appendChild(g)}let p=document.createElement("div");p.innerHTML="Packages with choices:",f.appendChild(p);let m=document.createElement("ul");a.forEach((g,y)=>{let L=document.createElement("li"),P=document.createElement("select");P.innerHTML=g.map(C=>`<option>${z(C.name)}</option>`).join(`
`),P.addEventListener("change",()=>{let C=g.find(Me=>Me.name===P.value);C!=null&&(l[y]=C)}),L.style.marginTop="5px",L.appendChild(P),m.appendChild(L)}),f.appendChild(m)}catch(c){console.error("[Package-Deps] Error during showing package choices to user",c)}})}function Ot({packageName:n,dependencies:t}){let e=[],r=atom.notifications.addInfo(`Installing ${n} dependencies`,{detail:`Installing ${t.map(o=>o.name).join(", ")}`,dismissable:!0}),a=document.createElement("progress");a.max=t.length,a.style.width="100%";try{var s;let o=atom.views.getView(r),l=(s=o==null?void 0:o.element)!==null&&s!==void 0?s:null;if(l==null)throw new Error("Unable to get notification element from view");let u=l.querySelector(".detail-content");if(u==null)throw new Error("Content detail container not found inside the notification");u.appendChild(a)}catch(o){console.error("[Package-Deps] Error during showing installation progress to user",o)}return{handleFailure({dependency:o,error:l}){var u;e.push(o.name),a.value+=1,console.error(`[Package-Deps] Unable to install ${o.name}, Error:`,(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:l)},handleDependencyInstalled(o){a.value+=1},handleComplete(){r.dismiss(),e.length>0?atom.notifications.addWarning(`Failed to install ${n} dependencies`,{detail:`These packages were not installed, check your console
for more info.
${e.join(`
`)}`,dismissable:!0}):atom.notifications.addSuccess(`Installed ${n} dependencies`,{detail:`Installed ${t.map(o=>o.name).join(", ")}`}),Promise.all(t.map(o=>e.includes(o.name)?null:atom.packages.activatePackage(o.name))).catch(o=>{console.error(`[Package-Deps] Error activating installed packages for ${n}`,o)})}}}async function Nt({dependencies:n}){return n.map(t=>Array.isArray(t)?t[0]:t)}function qt({dependencies:n}){let t=!1;return console.log(`Installing dependencies:
${n.map(e=>`  - ${e.name}`).join(`
`)}`),{handleFailure({dependency:e,error:r}){var a;t=!0,console.error(`Unable to install ${e.name}, Error:`,(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:r)},handleDependencyInstalled(e){console.log("Successfully installed",e.name)},handleComplete(){console.log("Installation complete"),t&&(process.exitCode=1)}}}var Ht=b?Ot:qt,Bt=b?Vt:Nt;async function Rt(n){if(k(typeof n=="string"&&n.length>0,"[Package-Deps] Package name is required"),$t(n))return;let t=await Dt(n);if(t.length===0)return;let e=await Promise.all(t.map(async o=>Array.isArray(o)?Promise.all(o.map(async l=>({...l,directory:await Q(l.name)}))):{...o,directory:await Q(o.name)})),r=await K(e,async function(o){return Array.isArray(o)?(await Promise.all(o.map(l=>Z(l)))).every(Boolean):Z(o)});if(r.length===0)return;let a=await Bt({packageName:n,dependencies:r});if(a.length===0)return;let s=Ht({packageName:n,dependencies:a});await gt(a,async function(o){try{await Ft(o),s.handleDependencyInstalled(o)}catch(l){s.handleFailure({dependency:o,error:l})}},{concurrency:2}),s.handleComplete()}q.install=Rt});var re=E((xn,H)=>{"use strict";var ne=()=>{let n=Error.prepareStackTrace;Error.prepareStackTrace=(e,r)=>r;let t=new Error().stack.slice(1);return Error.prepareStackTrace=n,t};H.exports=ne;H.exports.default=ne});var se=E((In,ae)=>{"use strict";var Gt=re();ae.exports=({depth:n=0}={})=>{let t=[],e=new Set;for(let r of Gt()){let a=r.getFileName(),s=r.getTypeName()!==null&&a!==null;if(e.has(a)||(e.add(a),t.unshift(r)),s)return t[n]}}});var ce=E(v=>{"use strict";var Wt=v&&v.__awaiter||function(n,t,e,r){function a(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(c){try{i(r.next(c))}catch(d){o(d)}}function u(c){try{i(r.throw(c))}catch(d){o(d)}}function i(c){c.done?s(c.value):a(c.value).then(l,u)}i((r=r.apply(n,t||[])).next())})},Ut=v&&v.__generator||function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(i){return function(c){return u([i,c])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(s=i[0]&2?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[i[0]&2,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!s||i[1]>s[0]&&i[1]<s[3])){e.label=i[1];break}if(i[0]===6&&e.label<s[1]){e.label=s[1],s=i;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(i);break}s[2]&&e.ops.pop(),e.trys.pop();continue}i=t.call(n,e)}catch(c){i=[6,c],a=0}finally{r=s=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(v,"__esModule",{value:!0});v.readManifestSync=v.readManifest=void 0;var ie=require("path"),Jt=ie.resolve,Xt=ie.sep,oe=require("fs"),Yt=oe.promises,Kt=oe.readFileSync,zt=se();function Qt(n){return n===void 0&&(n=""),Wt(this,void 0,void 0,function(){var t,e,r;return Ut(this,function(a){switch(a.label){case 0:t=le(n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Yt.readFile(t,"utf8")];case 2:return e=a.sent(),[2,JSON.parse(e)];case 3:return r=a.sent(),[2,null];case 4:return[2]}})})}v.readManifest=Qt;function Zt(n){n===void 0&&(n="");var t=le(n);try{var e=Kt(t,"utf8");return JSON.parse(e)}catch(r){return null}}v.readManifestSync=Zt;function le(n){n=(n==null?void 0:n.length)?n:en();var t=atom.packages.resolvePackagePath(n),e=Jt(t,"package.json");return e}function en(){var n=zt().getFileName(),t=atom.packages.getPackageDirPaths(),e=t.filter(function(r){return n.startsWith(r)});return(e==null?void 0:e.length)&&n.replace(e[0],"").split(Xt).filter(function(r){return r})[0]||""}});var ue=E(w=>{"use strict";var $=w&&w.__assign||function(){return $=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},$.apply(this,arguments)},tn=w&&w.__awaiter||function(n,t,e,r){function a(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function l(c){try{i(r.next(c))}catch(d){o(d)}}function u(c){try{i(r.throw(c))}catch(d){o(d)}}function i(c){c.done?s(c.value):a(c.value).then(l,u)}i((r=r.apply(n,t||[])).next())})},nn=w&&w.__generator||function(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(i){return function(c){return u([i,c])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(s=i[0]&2?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[i[0]&2,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!s||i[1]>s[0]&&i[1]<s[3])){e.label=i[1];break}if(i[0]===6&&e.label<s[1]){e.label=s[1],s=i;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(i);break}s[2]&&e.ops.pop(),e.trys.pop();continue}i=t.call(n,e)}catch(c){i=[6,c],a=0}finally{r=s=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(w,"__esModule",{value:!0});w.satisfyDependencies=void 0;var rn=te(),an=ce(),sn={logger:console.log};function on(n,t){return t===void 0&&(t={}),tn(this,void 0,void 0,function(){var e,r;return nn(this,function(a){switch(a.label){case 0:return e=$($({},sn),t),[4,an.readManifest(n)];case 1:return r=a.sent(),[4,rn.install(r.name)];case 2:return a.sent(),ln(r["package-deps"],e),[2]}})})}w.satisfyDependencies=on;function ln(n,t){t.enableDependencies&&n["package-deps"].map(function(e){atom.packages.isPackageDisabled(e)&&(atom.inDevMode()&&t.logger("["+n.name+"] Enabling package dependency '"+e+"'"),atom.packages.enablePackage(e))})}});var he=E(($n,ge)=>{ge.exports=me;me.sync=dn;var fe=require("fs");function un(n,t){var e=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!e||(e=e.split(";"),e.indexOf("")!==-1))return!0;for(var r=0;r<e.length;r++){var a=e[r].toLowerCase();if(a&&n.substr(-a.length).toLowerCase()===a)return!0}return!1}function pe(n,t,e){return!n.isSymbolicLink()&&!n.isFile()?!1:un(t,e)}function me(n,t,e){fe.stat(n,function(r,a){e(r,r?!1:pe(a,n,t))})}function dn(n,t){return pe(fe.statSync(n),n,t)}});var be=E((jn,Ee)=>{Ee.exports=ve;ve.sync=fn;var ye=require("fs");function ve(n,t,e){ye.stat(n,function(r,a){e(r,r?!1:we(a,t))})}function fn(n,t){return we(ye.statSync(n),t)}function we(n,t){return n.isFile()&&pn(n,t)}function pn(n,t){var e=n.mode,r=n.uid,a=n.gid,s=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),o=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),l=parseInt("100",8),u=parseInt("010",8),i=parseInt("001",8),c=l|u,d=e&i||e&u&&a===o||e&l&&r===s||e&c&&s===0;return d}});var ke=E((Ln,_e)=>{var Mn=require("fs"),M;process.platform==="win32"||global.TESTING_WINDOWS?M=he():M=be();_e.exports=B;B.sync=mn;function B(n,t,e){if(typeof t=="function"&&(e=t,t={}),!e){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,a){B(n,t||{},function(s,o){s?a(s):r(o)})})}M(n,t||{},function(r,a){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,a=!1),e(r,a)})}function mn(n,t){try{return M.sync(n,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES")return!1;throw e}}});var Te=E((Fn,Ce)=>{var S=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",xe=require("path"),gn=S?";":":",Ie=ke(),Se=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),Ae=(n,t)=>{let e=t.colon||gn,r=n.match(/\//)||S&&n.match(/\\/)?[""]:[...S?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(e)],a=S?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=S?a.split(e):[""];return S&&n.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:r,pathExt:s,pathExtExe:a}},Pe=(n,t,e)=>{typeof t=="function"&&(e=t,t={}),t||(t={});let{pathEnv:r,pathExt:a,pathExtExe:s}=Ae(n,t),o=[],l=i=>new Promise((c,d)=>{if(i===r.length)return t.all&&o.length?c(o):d(Se(n));let f=r[i],p=/^".*"$/.test(f)?f.slice(1,-1):f,m=xe.join(p,n),g=!p&&/^\.[\\\/]/.test(n)?n.slice(0,2)+m:m;c(u(g,i,0))}),u=(i,c,d)=>new Promise((f,p)=>{if(d===a.length)return f(l(c+1));let m=a[d];Ie(i+m,{pathExt:s},(g,y)=>{if(!g&&y)if(t.all)o.push(i+m);else return f(i+m);return f(u(i,c,d+1))})});return e?l(0).then(i=>e(null,i),e):l(0)},hn=(n,t)=>{t=t||{};let{pathEnv:e,pathExt:r,pathExtExe:a}=Ae(n,t),s=[];for(let o=0;o<e.length;o++){let l=e[o],u=/^".*"$/.test(l)?l.slice(1,-1):l,i=xe.join(u,n),c=!u&&/^\.[\\\/]/.test(n)?n.slice(0,2)+i:i;for(let d=0;d<r.length;d++){let f=c+r[d];try{if(Ie.sync(f,{pathExt:a}))if(t.all)s.push(f);else return f}catch(p){}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw Se(n)};Ce.exports=Pe;Pe.sync=hn});R(exports);qe(exports,{activate:()=>vn,config:()=>G,provideBuilder:()=>yn});var Be="build-sassc",Re="0.9.1",Ge="Atom Build provider for sassc, compiles Sass",We="https://github.com/idleberg/atom-build-sassc",Ue="MIT",Je=["buildprovider","compile","sass","sassc","css","linter","lint"],Xe="lib/provider.js",Ye={atom:">=1.0.0 <2.0.0"},Ke=["core:loaded-shell-environment"],ze={builder:{description:"Compiles Sass",versions:{"2.0.0":"provideBuilder"}}},Qe=[[{name:"buildium"},{name:"build"}]],Ze={},et={"@atxm/developer-console":"^0.5.0","atom-package-deps":"^7.0.1","atom-satisfy-dependencies":"^0.3.0","@babel/core":"^7.13.16","@babel/eslint-parser":"^7.13.10","@babel/plugin-proposal-optional-chaining":"^7.13.8","cross-env":"^7.0.3",esbuild:"^0.12.1",eslint:"^7.2.2","eslint-plugin-json":"^3.0.0",husky:">=4 <5","lint-staged":"^11.0.0","log-symbols":"^5.0.0","npm-run-all":"^4.1.5","remark-cli":"^9.0.0",rimraf:"^3.0.2",which:"^2.0.2"},tt={build:"node ./tools/build.mjs",clean:"rimraf ./lib",dev:"npm run start","lint:md":"remark . --quiet --frail --ignore-path .gitignore","lint:js":"eslint ./src --ignore-path .gitignore",lint:"npm-run-all --parallel lint:*",start:"cross-env ESBUILD_WATCH=true node ./tools/build.mjs",test:"npm run lint"},nt={hooks:{"pre-commit":"lint-staged"}},rt={"*.js":"eslint --cache --fix"},at={node:"14.17.0",yarn:"1.22.10"},_={name:Be,version:Re,description:Ge,repository:We,license:Ue,keywords:Je,main:Xe,engines:Ye,activationHooks:Ke,providedServices:ze,"package-deps":Qe,dependencies:Ze,devDependencies:et,scripts:tt,husky:nt,"lint-staged":rt,volta:at};var G={pathToSass:{title:"Path to Sass",description:"Specify a custom path to the `sassc` binary",type:"string",default:"sassc",order:0},customArguments:{title:"Custom Arguments",description:"Specify your preferred arguments for `sassc`, supports [replacement](https://github.com/noseglid/atom-build#replacement) placeholders",type:"string",default:"--style compressed {FILE_ACTIVE} {FILE_ACTIVE_NAME_BASE}.min.css",order:1},manageDependencies:{title:"Manage Dependencies",description:"When enabled, third-party dependencies will be installed automatically",type:"boolean",default:!0,order:2},alwaysEligible:{title:"Always Eligible",description:"The build provider will be available in your project, even when not eligible",type:"boolean",default:!1,order:3}};function x(n){return atom.config.get(`${_.name}.${n}`)}var De=F(require("events")),$e=F(ue());function I(n,t){for(var e=0,r=t.length,a=n.length;e<r;e++,a++)n[a]=t[e];return n}var cn=function(){function n(t){t===void 0&&(t={}),this.name=t.name,this.styleSheet=`
      background-color: `+(t.backgroundColor||"darkgrey")+`;
      border-radius: 2px;
      color: `+(t.color||"white")+`;
      line-height: 1.5;
      padding: 1px 4px;
      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
    `}return n.prototype.__console__=function(t){for(var e,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];!(atom==null?void 0:atom.inDevMode())||(r.unshift("%c"+this.name+"%c",this.styleSheet,""),(e=window.console)[t].apply(e,r))},n.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,I(["debug"],t))},n.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,I(["error"],t))},n.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,I(["info"],t))},n.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,I(["log"],t))},n.prototype.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,I(["trace"],t))},n.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.__console__.apply(this,I(["warn"],t))},n}(),de=cn;var j=new de({name:_.name,backgroundColor:"rosybrown"});var je=F(Te());function yn(){return class extends De.EventEmitter{constructor(t){super();this.cwd=t,atom.config.observe(`${_.name}.customArguments`,()=>this.emit("refresh"))}getNiceName(){return"SassC"}isEligible(){if(x("alwaysEligible")===!0)return j.log("Always eligible"),!0;let t=x("pathToSass");return je.default.sync(t,{nothrow:!0})?(j.log("Build provider is eligible"),!0):(j.error("Build provider isn't eligible"),!1)}settings(){let t=["(?<message>Error: .*)\\n\\s+on line (?<line>\\d+) of (?<file>.*)\\n"],e=x("pathToSass")||"sassc",r=x("customArguments").trim().split(" ");return[{name:"SassC",exec:e,args:["{FILE_ACTIVE}","{FILE_ACTIVE_NAME_BASE}.css"],cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"sassc:compile",errorMatch:t},{name:"SassC (compact)",exec:e,args:["--style","compact","{FILE_ACTIVE}","{FILE_ACTIVE_NAME_BASE}.css"],cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"sassc:compile-compact",errorMatch:t},{name:"SassC (compressed)",exec:e,args:["--style","compressed","{FILE_ACTIVE}","{FILE_ACTIVE_NAME_BASE}.min.css"],cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"sassc:compile-compressed",errorMatch:t},{name:"SassC (expanded)",exec:e,args:["--style","expanded","{FILE_ACTIVE}","{FILE_ACTIVE_NAME_BASE}.css"],cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"sassc:compile-compressed",errorMatch:t},{name:"SassC (user)",exec:e,args:r,cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"sassc:compile-with-user-settings",errorMatch:t}]}}}async function vn(){x("manageDependencies")===!0&&(0,$e.satisfyDependencies)(_.name)}0&&(module.exports={activate,config,provideBuilder});
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=provider.js.map
